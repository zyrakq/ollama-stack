services:
  ollama:
    container_name: ollama
    image: ollama/ollama
    restart: unless-stopped
    pull_policy: always
    environment:
      # OLLAMA_HOST: ${OLLAMA_HOST:-"0.0.0.0"}
      OLLAMA_KEEP_ALIVE: ${OLLAMA_KEEP_ALIVE:-5m}
      OLLAMA_FLASH_ATTENTION: ${OLLAMA_FLASH_ATTENTION:-0}
    logging:
      driver: "json-file"
      options:
        max-size: 10m
        max-file: 3
    healthcheck:
      test: ollama ps || exit 1
      interval: 10s
    volumes:
      - ollama-data:/root/.ollama
    networks:
      - ollama-network
volumes:
  ollama-data:
    name: ollama-data
networks:
  ollama-network:
    name: ollama-network
